<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Brighton Music Events</title>
		<style>
			body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
			h1 { color: #333; }
			ul { list-style-type: none; padding: 0; }
			li { margin-bottom: 20px; border-bottom: 1px solid #eee; padding-bottom: 20px; }
			a { color: #0066cc; text-decoration: none; }
			a:hover { text-decoration: underline; }
			.venue { color: #666; font-style: italic; }
		</style>
	</head>
	<body>
		<h1>Brighton Music Events</h1>
		<div id="events-list"></div>

		<script>
			function formatDate(dateString) {
				const date = new Date(dateString);
				if (isNaN(date.getTime())) {
					return dateString; // Return original string if parsing fails
				}
				return date.toLocaleDateString('en-GB', { 
					weekday: 'long', 
					year: 'numeric', 
					month: 'long', 
					day: 'numeric',
					hour: 'numeric',
					minute: 'numeric'
				});
			}

			fetch('events.json')
				.then(response => response.json())
				.then(events => {
					const eventsList = document.getElementById('events-list');
					
					// Sort events by date
					events.sort((a, b) => new Date(a.date) - new Date(b.date));
					
					let eventsHTML = '<ul>';
					events.forEach(event => {
						eventsHTML += `
							<li>
								<h2>${event.title}</h2>
								<p>Date: ${formatDate(event.date)}</p>
								<p class="venue">Venue: ${event.venue}</p>
								<a href="${event.link}" target="_blank">More Info</a>
							</li>
						`;
					});
					eventsHTML += '</ul>';
					
					eventsList.innerHTML = eventsHTML;
				})
				.catch(error => console.error('Error:', error));
		</script>
	</body>
</html>